<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#16a34a">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="–ò–Ω—Å—É–ª—å—Ç">
  <meta name="description" content="–û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–∞ –∏–Ω—Å—É–ª—å—Ç–∞ –∑–∞ 6 –º–µ—Å—è—Ü–µ–≤">
  <meta name="mobile-web-app-capable" content="yes">
  
  <!-- Apple Touch Icons -->
  <link rel="apple-touch-icon" href="icon-192.png">
  
  <!-- Web App Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <title>–ò–Ω—Å—É–ª—å—Ç</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #333;
      line-height: 1.6;
      padding: 15px;
      min-height: 100vh;
    }
    
    .container {
      max-width: 100%;
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      padding: 20px;
      margin-bottom: 20px;
    }
    
    header {
      text-align: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #f1f5f9;
    }
    
    .app-icon {
      width: 60px;
      height: 60px;
      background: #16a34a;
      border-radius: 50%;
      margin: 0 auto 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      color: white;
    }
    
    h1 {
      font-size: 22px;
      color: #0f172a;
      margin-bottom: 5px;
    }
    
    .subtitle {
      color: #64748b;
      font-size: 14px;
      font-weight: 500;
    }
    
    .disclaimer {
      background: #fffbeb;
      border: 2px solid #eab308;
      padding: 15px;
      margin: 15px 0;
      border-radius: 12px;
      font-size: 14px;
      color: #854d0e;
    }
    
    .form-section {
      margin-bottom: 25px;
    }
    
    .section-title {
      font-size: 18px;
      font-weight: 700;
      margin: 20px 0 15px;
      color: #1e293b;
      padding-bottom: 8px;
      border-bottom: 2px solid #e2e8f0;
    }
    
    .form-group {
      margin-bottom: 16px;
    }
    
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      font-size: 15px;
      color: #374151;
    }
    
    .required::after {
      content: " *";
      color: #ef4444;
    }
    
    .optional::after {
      content: " *";
      color: #22c55e;
    }
    
    .hint {
      font-size: 12px;
      color: #6b7280;
      margin-top: 2px;
      font-weight: normal;
    }
    
    input, select, button {
      width: 100%;
      padding: 14px;
      font-size: 16px;
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      background: #f8fafc;
      font-family: inherit;
    }
    
    input:focus, select:focus {
      outline: none;
      border-color: #3b82f6;
      background: white;
    }
    
    .calculate-btn {
      background: linear-gradient(135deg, #16a34a, #15803d);
      color: white;
      border: none;
      border-radius: 14px;
      font-weight: 700;
      font-size: 18px;
      padding: 18px;
      margin: 20px 0;
      cursor: pointer;
      transition: transform 0.2s;
    }
    
    .calculate-btn:active {
      transform: scale(0.98);
    }
    
    .result {
      background: white;
      padding: 20px;
      border-radius: 16px;
      margin-top: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      border-left: 6px solid;
      display: none;
    }
    
    .low {
      border-left-color: #22c55e;
      background: linear-gradient(135deg, #dcfce7, #bbf7d0);
    }
    
    .moderate {
      border-left-color: #f59e0b;
      background: linear-gradient(135deg, #fef3c7, #fde68a);
    }
    
    .high {
      border-left-color: #ef4444;
      background: linear-gradient(135deg, #fee2e2, #fecaca);
      color: #991b1b;
    }
    
    .risk-value {
      font-size: 42px;
      font-weight: 900;
      margin: 10px 0;
      text-align: center;
    }
    
    .risk-level {
      font-size: 20px;
      font-weight: 700;
      text-align: center;
      margin-bottom: 10px;
      text-transform: uppercase;
    }
    
    .risk-message {
      text-align: center;
      margin-bottom: 20px;
      font-weight: 500;
    }
    
    .recommendations {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 2px dashed #cbd5e1;
    }
    
    .recommendations h4 {
      margin-bottom: 15px;
      color: #1e293b;
    }
    
    .recommendations ul {
      padding-left: 20px;
    }
    
    .recommendations li {
      margin-bottom: 8px;
      font-size: 14px;
    }
    
    .education {
      background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
      padding: 20px;
      border-radius: 16px;
      margin-top: 25px;
      border: 2px solid #bae6fd;
    }
    
    .education h3 {
      text-align: center;
      margin-bottom: 20px;
      color: #0c4a6e;
      font-size: 20px;
    }
    
    .fast-section {
      background: white;
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 20px;
      border: 2px solid #bae6fd;
    }
    
    .fast-item {
      margin-bottom: 15px;
      padding-bottom: 15px;
      border-bottom: 1px solid #e2e8f0;
    }
    
    .fast-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }
    
    .fast-letter {
      font-size: 24px;
      font-weight: 900;
      color: #0ea5e9;
      margin-right: 10px;
    }
    
    .fast-title {
      font-weight: 700;
      margin-bottom: 5px;
    }
    
    .atypical-signs {
      background: #fef2f2;
      padding: 15px;
      border-radius: 12px;
      border: 2px solid #fecaca;
      margin-top: 15px;
    }
    
    .atypical-signs h4 {
      color: #b91c1c;
      margin-bottom: 10px;
    }
    
    .atypical-signs ul {
      padding-left: 20px;
    }
    
    .atypical-signs li {
      margin-bottom: 5px;
      font-size: 14px;
    }
    
    .emergency {
      background: linear-gradient(135deg, #fef2f2, #fee2e2);
      border: 2px solid #fecaca;
      border-radius: 16px;
      padding: 20px;
      margin-top: 20px;
      text-align: center;
    }
    
    .emergency-call {
      display: block;
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: white;
      text-decoration: none;
      font-weight: 800;
      font-size: 20px;
      padding: 16px;
      border-radius: 12px;
      margin: 15px 0;
    }
    
    .error {
      color: #ef4444;
      font-weight: 600;
      text-align: center;
      margin: 15px 0;
      padding: 15px;
      background: #fef2f2;
      border-radius: 12px;
      border: 2px solid #fecaca;
      display: none;
    }
    
    .offline-notification {
      background: #f59e0b;
      color: white;
      text-align: center;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 8px;
      display: none;
    }
    
    .footer {
      text-align: center;
      font-size: 12px;
      color: rgba(255,255,255,0.8);
      margin-top: 20px;
    }
    
    @media (max-width: 480px) {
      .container {
        padding: 15px;
        border-radius: 16px;
      }
      
      h1 {
        font-size: 20px;
      }
      
      input, select, button {
        padding: 12px;
      }
      
      .calculate-btn {
        padding: 16px;
        font-size: 17px;
      }
      
      .risk-value {
        font-size: 36px;
      }
    }
  </style>
</head>
<body>
  <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ä–∞–±–æ—Ç–µ –≤ –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–µ -->
  <div id="offlineNotification" class="offline-notification">
    ‚ö° –†–∞–±–æ—Ç–∞–µ–º –≤ –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–µ
  </div>
  
  <div class="container">
    <header>
      <div class="app-icon">üß†</div>
      <h1>–û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–∞ –∏–Ω—Å—É–ª—å—Ç–∞</h1>
      <div class="subtitle">–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 6 –º–µ—Å—è—Ü–µ–≤</div>
    </header>
    
    <div class="disclaimer">
      ‚ö†Ô∏è <strong>–í–Ω–∏–º–∞–Ω–∏–µ:</strong> –≠—Ç–æ –Ω–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç! –ü—Ä–∏ –ª—é–±—ã—Ö –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∏–º–ø—Ç–æ–º–∞—Ö –∑–≤–æ–Ω–∏—Ç–µ <strong>103</strong> –∏–ª–∏ <strong>112</strong> –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ!
    </div>
    
    <div class="form-section">
      <div class="section-title">üìä –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</div>
      
      <div class="form-group">
        <label class="required">–í–æ–∑—Ä–∞—Å—Ç (–ø–æ–ª–Ω—ã—Ö –ª–µ—Ç)</label>
        <input type="number" id="age" min="1" max="120" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç" required>
      </div>
      
      <div class="form-group">
        <label class="required">–ü–æ–ª</label>
        <select id="gender" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª</option>
          <option value="male">–ú—É–∂—Å–∫–æ–π</option>
          <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
        </select>
      </div>
    </div>
    
    <div class="form-section">
      <div class="section-title">üè• –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
      
      <div class="form-group">
        <label class="optional">–ë—ã–ª –ª–∏ –∏–Ω—Å—É–ª—å—Ç —É –±–ª–∏–∑–∫–∏—Ö —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤?</label>
        <select id="family_stroke">
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç</option>
          <option value="yes">–î–∞</option>
          <option value="no">–ù–µ—Ç</option>
        </select>
      </div>
      
      <div class="form-group">
        <label class="required">–ö—É—Ä–µ–Ω–∏–µ</label>
        <select id="smoking" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç</option>
          <option value="current">–ö—É—Ä—é —Å–µ–π—á–∞—Å</option>
          <option value="past">–ë—Ä–æ—Å–∏–ª(–∞)</option>
          <option value="never">–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫—É—Ä–∏–ª(–∞)</option>
        </select>
      </div>
      
      <div class="form-group">
        <label class="required">–û–±—Ä–∞–∑ –∂–∏–∑–Ω–∏</label>
        <select id="activity" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç</option>
          <option value="active">–ü–æ–¥–≤–∏–∂–Ω—ã–π</option>
          <option value="moderate">–£–º–µ—Ä–µ–Ω–Ω–æ –∞–∫—Ç–∏–≤–Ω—ã–π</option>
          <option value="sedentary">–ú–∞–ª–æ–ø–æ–¥–≤–∏–∂–Ω—ã–π</option>
        </select>
      </div>
      
      <div class="form-group">
        <label class="required">–ü–æ–≤—ã—à–µ–Ω–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ</label>
        <div class="hint">(>130 –º–º —Ä—Ç.—Å—Ç.)</div>
        <select id="hypertension" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç</option>
          <option value="yes">–î–∞</option>
          <option value="no">–ù–µ—Ç</option>
        </select>
      </div>
      
      <div class="form-group">
        <label class="required">–°–∞—Ö–∞—Ä–Ω—ã–π –¥–∏–∞–±–µ—Ç?</label>
        <select id="diabetes" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç</option>
          <option value="yes">–î–∞</option>
          <option value="no">–ù–µ—Ç</option>
        </select>
      </div>
      
      <div class="form-group">
        <label class="required">–£—á–∞—â—ë–Ω–Ω–æ–µ —Å–µ—Ä–¥—Ü–µ–±–∏–µ–Ω–∏–µ</label>
        <select id="palpitations" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç</option>
          <option value="often">–ß–∞—Å—Ç–æ</option>
          <option value="rarely">–†–µ–¥–∫–æ</option>
          <option value="never">–ù–∏–∫–æ–≥–¥–∞</option>
        </select>
      </div>
      
      <div class="form-group">
        <label class="required">–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –≤–æ–∑–¥—É—Ö–∞ –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ</label>
        <select id="dyspnea" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç</option>
          <option value="often">–ß–∞—Å—Ç–æ</option>
          <option value="rarely">–†–µ–¥–∫–æ</option>
          <option value="never">–ù–∏–∫–æ–≥–¥–∞</option>
        </select>
      </div>
      
      <div class="form-group">
        <label class="required">–ì–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏–ª–∏ –æ–±–º–æ—Ä–æ–∫–∏</label>
        <select id="dizziness" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç</option>
          <option value="often">–ß–∞—Å—Ç–æ</option>
          <option value="rarely">–†–µ–¥–∫–æ</option>
          <option value="never">–ù–∏–∫–æ–≥–¥–∞</option>
        </select>
      </div>
      
      <div class="form-group">
        <label class="required">–ú–µ—Ä—Ü–∞—Ç–µ–ª—å–Ω–∞—è –∞—Ä–∏—Ç–º–∏—è?</label>
        <select id="afib" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç</option>
          <option value="yes">–î–∞</option>
          <option value="no">–ù–µ—Ç</option>
        </select>
      </div>
      
      <div class="form-group">
        <label class="optional">–£—Ä–æ–≤–µ–Ω—å –õ–ü–ù–ü-—Ö–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω–∞ (–º–º–æ–ª—å/–ª)</label>
        <input type="number" id="ldl" min="0" max="20" step="0.1" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
      </div>
      
      <div class="form-group">
        <label class="required">–ë—ã–ª –ª–∏ —É –≤–∞—Å –∏–Ω—Å—É–ª—å—Ç?</label>
        <select id="stroke_history" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç</option>
          <option value="yes">–î–∞</option>
          <option value="no">–ù–µ—Ç</option>
        </select>
      </div>
    </div>
    
    <button class="calculate-btn" onclick="calculateRisk()">
      üßÆ –†–ê–°–°–ß–ò–¢–ê–¢–¨ –†–ò–°–ö
    </button>
    
    <div id="error" class="error"></div>
    
    <div id="result" class="result">
      <div class="risk-value" id="risk-percent">0.0%</div>
      <div class="risk-level" id="risk-level">–Ω–∏–∑–∫–∏–π</div>
      <div class="risk-message" id="risk-message"></div>
      
      <div class="recommendations" id="recommendations">
        <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å -->
      </div>
    </div>
    
    <div class="education">
      <h3>üß† –£–∑–Ω–∞–π –∏–Ω—Å—É–ª—å—Ç –≤–æ–≤—Ä–µ–º—è (FAST+)</h3>
      
      <div class="fast-section">
        <div class="fast-item">
          <span class="fast-letter">F</span>
          <span class="fast-title">Face (–ª–∏—Ü–æ)</span>
          <div>–∞—Å–∏–º–º–µ—Ç—Ä–∏—è –ª–∏—Ü–∞ –ø—Ä–∏ —É–ª—ã–±–∫–µ</div>
        </div>
        
        <div class="fast-item">
          <span class="fast-letter">A</span>
          <span class="fast-title">Arms (—Ä—É–∫–∏)</span>
          <div>—Å–ª–∞–±–æ—Å—Ç—å –≤ –æ–¥–Ω–æ–π —Ä—É–∫–µ</div>
        </div>
        
        <div class="fast-item">
          <span class="fast-letter">S</span>
          <span class="fast-title">Speech (—Ä–µ—á—å)</span>
          <div>–Ω–µ–≤–Ω—è—Ç–Ω–∞—è –∏–ª–∏ –ø—Ä–æ–ø–∞–≤—à–∞—è —Ä–µ—á—å</div>
        </div>
        
        <div class="fast-item">
          <span class="fast-letter">T</span>
          <span class="fast-title">Time (–≤—Ä–µ–º—è)</span>
          <div>–∑–≤–æ–Ω–∏ 103 –∏–ª–∏ 112!</div>
        </div>
        
        <div class="fast-item">
          <span class="fast-letter">+</span>
          <span class="fast-title">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏</span>
          <div>–≤–Ω–µ–∑–∞–ø–Ω–∞—è —Å–ª–µ–ø–æ—Ç–∞, –≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ + –¥–∏—Å–∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è, ¬´–º–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–∞—è¬ª –≥–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å</div>
        </div>
      </div>
      
      <div class="atypical-signs">
        <h4>‚ö†Ô∏è –ê—Ç–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (—á–∞—Å—Ç–æ —É–ø—É—Å–∫–∞—é—Ç—Å—è):</h4>
        <ul>
          <li>–ò–∫–æ—Ç–∞ + —Ç–æ—à–Ω–æ—Ç–∞</li>
          <li>–ë–æ–ª—å –≤ –≥—Ä—É–¥–∏/—Å–ø–∏–Ω–µ + —Å–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å —Å–æ–∑–Ω–∞–Ω–∏—è</li>
          <li>–í–Ω–µ–∑–∞–ø–Ω–∞—è –∞–≥—Ä–µ—Å—Å–∏—è –∏–ª–∏ –∞–ø–∞—Ç–∏—è</li>
          <li>–ü–æ—Ç–µ—Ä—è —Å–æ–∑–Ω–∞–Ω–∏—è –±–µ–∑ —Å—É–¥–æ—Ä–æ–≥</li>
        </ul>
      </div>
      
      <div class="emergency">
        <strong>üÜò –ü–†–ò –õ–Æ–ë–´–• –°–ò–ú–ü–¢–û–ú–ê–•:</strong>
        <a href="tel:103" class="emergency-call">–í–´–ó–í–ê–¢–¨ 103</a>
        <a href="tel:112" class="emergency-call">–ò–õ–ò 112</a>
        <div style="font-size: 13px; margin-top: 10px; color: #64748b;">
          –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –¢–ò–ê ‚Äî –ø—Ä–µ–¥–≤–µ—Å—Ç–Ω–∏–∫ –∏–Ω—Å—É–ª—å—Ç–∞!
        </div>
      </div>
    </div>
    
    <div class="footer">
      <p>–í–µ—Ä—Å–∏—è PWA 1.0 ‚Ä¢ GitHub Pages ‚Ä¢ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–æ—Å–∏—Ç –æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä</p>
    </div>
  </div>

  <script>
    // Risk Calculation Function
    function calculateRisk() {
      const errorEl = document.getElementById('error');
      const resultEl = document.getElementById('result');
      errorEl.style.display = 'none';
      resultEl.style.display = 'none';
      
      try {
        // –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–æ—Ä–º—ã
        const age = parseFloat(document.getElementById('age').value);
        const gender = document.getElementById('gender').value;
        const familyStroke = document.getElementById('family_stroke').value;
        const smoking = document.getElementById('smoking').value;
        const activity = document.getElementById('activity').value;
        const hypertension = document.getElementById('hypertension').value;
        const diabetes = document.getElementById('diabetes').value;
        const palpitations = document.getElementById('palpitations').value;
        const dyspnea = document.getElementById('dyspnea').value;
        const dizziness = document.getElementById('dizziness').value;
        const afib = document.getElementById('afib').value;
        const ldlInput = document.getElementById('ldl').value;
        const strokeHistory = document.getElementById('stroke_history').value;
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
        if (isNaN(age) || !age) {
          throw new Error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç');
        }
        
        if (!gender) {
          throw new Error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª');
        }
        
        if (!smoking) {
          throw new Error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –∫—É—Ä–µ–Ω–∏—è');
        }
        
        if (!activity) {
          throw new Error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏');
        }
        
        if (!hypertension) {
          throw new Error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –Ω–∞–ª–∏—á–∏–µ –ø–æ–≤—ã—à–µ–Ω–Ω–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è');
        }
        
        if (!diabetes) {
          throw new Error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Å–∞—Ö–∞—Ä–Ω–æ–≥–æ –¥–∏–∞–±–µ—Ç–∞');
        }
        
        if (!palpitations) {
          throw new Error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –Ω–∞–ª–∏—á–∏–µ —É—á–∞—â—ë–Ω–Ω–æ–≥–æ —Å–µ—Ä–¥—Ü–µ–±–∏–µ–Ω–∏—è');
        }
        
        if (!dyspnea) {
          throw new Error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –Ω–∞–ª–∏—á–∏–µ –æ–¥—ã—à–∫–∏ –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ');
        }
        
        if (!dizziness) {
          throw new Error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –Ω–∞–ª–∏—á–∏–µ –≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –æ–±–º–æ—Ä–æ–∫–æ–≤');
        }
        
        if (!afib) {
          throw new Error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –Ω–∞–ª–∏—á–∏–µ –º–µ—Ä—Ü–∞—Ç–µ–ª—å–Ω–æ–π –∞—Ä–∏—Ç–º–∏–∏');
        }
        
        if (!strokeHistory) {
          throw new Error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ, –±—ã–ª –ª–∏ —É –≤–∞—Å –∏–Ω—Å—É–ª—å—Ç');
        }
        
        if (age < 1 || age > 120) {
          throw new Error('–í–æ–∑—Ä–∞—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 1 –¥–æ 120 –ª–µ—Ç');
        }
        
        // –†–∞—Å—á–µ—Ç —Ä–∏—Å–∫–∞
        let riskScore = 0;
        
        // –í–æ–∑—Ä–∞—Å—Ç
        if (age >= 40) {
          riskScore += (age - 39) * 0.05;
        }
        
        // –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã
        if (strokeHistory === 'yes') riskScore += 3.0;
        if (hypertension === 'yes') riskScore += 2.0;
        if (diabetes === 'yes') riskScore += 1.5;
        if (afib === 'yes') riskScore += 2.0;
        if (familyStroke === 'yes') riskScore += 1.0;
        
        // –ù–æ–≤—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã
        if (smoking === 'current') riskScore += 1.3;
        if (smoking === 'past') riskScore += 0.5;
        if (activity === 'sedentary') riskScore += 0.8;
        if (activity === 'moderate') riskScore += 0.3;
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏–º–ø—Ç–æ–º—ã
        if (palpitations === 'often') riskScore += 0.5;
        if (dyspnea === 'often') riskScore += 0.5;
        if (dizziness === 'often') riskScore += 0.6;
        
        // –•–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
        if (ldlInput && parseFloat(ldlInput) > 3.0) riskScore += 1.2;
        
        // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç—ã –∑–∞ 6 –º–µ—Å—è—Ü–µ–≤
        const riskPercent = Math.min(riskScore * 0.8, 10.0);
        
        let riskLevel, message, recommendations;
        
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Ä–∏—Å–∫–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
        if (riskPercent < 1) {
          riskLevel = '–Ω–∏–∑–∫–∏–π';
          message = '–í–∞—à —Ä–∏—Å–∫ –∏–Ω—Å—É–ª—å—Ç–∞ –≤ –±–ª–∏–∂–∞–π—à–∏–µ –ø–æ–ª–≥–æ–¥–∞ ‚Äî –Ω–∏–∑–∫–∏–π. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤–µ—Å—Ç–∏ –∑–¥–æ—Ä–æ–≤—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏!';
          recommendations = `
            <h4>‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h4>
            <ul>
              <li>–†–µ–≥—É–ª—è—Ä–Ω–∞—è —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (150+ –º–∏–Ω—É—Ç –≤ –Ω–µ–¥–µ–ª—é)</li>
              <li>–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —Å–æ–ª–∏</li>
              <li>–ö–æ–Ω—Ç—Ä–æ–ª—å –∞—Ä—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è 1 —Ä–∞–∑ –≤ –º–µ—Å—è—Ü</li>
              <li>–ï–∂–µ–≥–æ–¥–Ω–∞—è –¥–∏—Å–ø–∞–Ω—Å–µ—Ä–∏–∑–∞—Ü–∏—è</li>
            </ul>
          `;
        } else if (riskPercent <= 3) {
          riskLevel = '—É–º–µ—Ä–µ–Ω–Ω—ã–π';
          message = '–í–∞—à —Ä–∏—Å–∫ ‚Äî –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –≤—Ä–∞—á–∞.';
          recommendations = `
            <h4>üö® –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:</h4>
            <ul>
              <li>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∞—Ä—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è</li>
              <li>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Ç–µ—Ä–∞–ø–µ–≤—Ç–∞ –∏–ª–∏ –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞</li>
              <li>–ö–æ—Ä—Ä–µ–∫—Ü–∏—è —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —Ä–∏—Å–∫–∞ (–≤–µ—Å, –ø–∏—Ç–∞–Ω–∏–µ, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)</li>
              <li>–†–µ–≥—É–ª—è—Ä–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏–º–ø—Ç–æ–º–æ–≤</li>
            </ul>
          `;
        } else {
          riskLevel = '–≤—ã—Å–æ–∫–∏–π';
          message = '‚ö†Ô∏è –í–∞—à —Ä–∏—Å–∫ –∏–Ω—Å—É–ª—å—Ç–∞ –≤ –±–ª–∏–∂–∞–π—à–∏–µ –º–µ—Å—è—Ü—ã ‚Äî –≤—ã—Å–æ–∫–∏–π. –¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ä–æ—á–Ω–∞—è –≤—Ä–∞—á–µ–±–Ω–∞—è –æ—Ü–µ–Ω–∫–∞!';
          recommendations = `
            <h4>üÜò –°—Ä–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:</h4>
            <ul>
              <li>–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É –ø—Ä–∏ –ª—é–±—ã—Ö —Å–∏–º–ø—Ç–æ–º–∞—Ö</li>
              <li>–ó–∞–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –∫ —Ç–µ—Ä–∞–ø–µ–≤—Ç—É –≤ –±–ª–∏–∂–∞–π—à–∏–µ –¥–Ω–∏</li>
              <li>–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ –¥–∞–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞</li>
              <li>–ò–º–µ–π—Ç–µ –ø–æ–¥ —Ä—É–∫–æ–π –Ω–æ–º–µ—Ä–∞ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–ª—É–∂–±</li>
            </ul>
          `;
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        document.getElementById('risk-percent').textContent = riskPercent.toFixed(1) + '%';
        document.getElementById('risk-level').textContent = riskLevel;
        document.getElementById('risk-message').textContent = message;
        document.getElementById('recommendations').innerHTML = recommendations;
        
        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è —Ä–∏—Å–∫–∞
        resultEl.className = 'result';
        if (riskLevel === '–Ω–∏–∑–∫–∏–π') resultEl.classList.add('low');
        else if (riskLevel === '—É–º–µ—Ä–µ–Ω–Ω—ã–π') resultEl.classList.add('moderate');
        else resultEl.classList.add('high');
        
        resultEl.style.display = 'block';
        
        // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
        setTimeout(() => {
          resultEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 100);
        
      } catch (error) {
        errorEl.textContent = error.message;
        errorEl.style.display = 'block';
        errorEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }

    // PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
    document.addEventListener('DOMContentLoaded', function() {
      // –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
      setTimeout(() => {
        document.getElementById('age').value = '52';
        document.getElementById('gender').value = 'male';
        document.getElementById('family_stroke').value = 'yes';
        document.getElementById('smoking').value = 'current';
        document.getElementById('activity').value = 'sedentary';
        document.getElementById('hypertension').value = 'yes';
        document.getElementById('diabetes').value = 'no';
        document.getElementById('palpitations').value = 'rarely';
        document.getElementById('dyspnea').value = 'never';
        document.getElementById('dizziness').value = 'rarely';
        document.getElementById('afib').value = 'no';
        document.getElementById('ldl').value = '4.2';
        document.getElementById('stroke_history').value = 'no';
      }, 500);
      
      // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–∞–±–æ—Ç—ã
      registerServiceWorker();
      
      // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–Ω–ª–∞–π–Ω/–æ—Ñ—Ñ–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å–∞
      updateOnlineStatus();
      window.addEventListener('online', updateOnlineStatus);
      window.addEventListener('offline', updateOnlineStatus);
    });

    // –§—É–Ω–∫—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker
    function registerServiceWorker() {
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/stroke-risk-app/sw.js')
          .then(function(registration) {
            console.log('‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: ', registration.scope);
          })
          .catch(function(error) {
            console.log('‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker: ', error);
          });
      }
    }

    // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –æ–Ω–ª–∞–π–Ω/–æ—Ñ—Ñ–ª–∞–π–Ω
    function updateOnlineStatus() {
      const offlineNotification = document.getElementById('offlineNotification');
      if (!navigator.onLine) {
        offlineNotification.style.display = 'block';
        console.log('üì¥ –†–∞–±–æ—Ç–∞–µ–º –≤ –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–µ');
      } else {
        offlineNotification.style.display = 'none';
        console.log('üì± –û–Ω–ª–∞–π–Ω-—Ä–µ–∂–∏–º');
      }
    }
  </script>
</body>
</html>
